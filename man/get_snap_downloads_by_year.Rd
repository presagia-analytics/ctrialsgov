% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/snap.R
\name{get_snap_downloads_by_year}
\alias{get_snap_downloads_by_year}
\title{Retrieve Snapshot Download Metadata for a Given Year}
\usage{
get_snap_downloads_by_year(year)
}
\arguments{
\item{year}{Integer. The year for which to retrieve snapshot download metadata.
Must be between 2017 and the current year (inclusive). Years outside this range
will result in a CLI-friendly error.}
}
\value{
A tibble with the following columns:
\describe{
  \item{download_name}{Character. The filename of the snapshot archive (e.g., `20250731_export_ctgov.zip`).}
  \item{dl_url}{Character. The URL from which the snapshot can be downloaded.}
  \item{snap_date}{Date. The date of the snapshot, parsed from the filename.}
}
}
\description{
This function fetches metadata about snapshot downloads from the AACT website
for a specified year. It validates the year (ensuring it's within the supported
range), constructs the correct URL to access flat-file snapshot listings, parses
the HTML to extract relevant download names, URLs, and snapshot dates, and
returns them as a tidy tibble.
}
\details{
The function builds a download page URL using the year provided, then parses the
resulting HTML content to find hyperlinks that match expected snapshot filename
patterns (e.g., `_export_ctgov.zip`, `_pipe-delimited-export.zip`). It extracts
both the download filename and URL, then parses the date embedded in the filename
to produce a proper date column. If the year is before 2017 or in the future,
the function aborts with an informative message.
}
\examples{
\dontrun{
# Get snapshot metadata for 2025
snaps_2025 <- get_snap_downloads_by_year(2025)
print(snaps_2025)

# Attempting to query before 2017 or in the future will abort
get_snap_downloads_by_year(2015)
get_snap_downloads_by_year(lubridate::year(Sys.Date()) + 1)
}

}
