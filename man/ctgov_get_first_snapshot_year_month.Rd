% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/snap.R
\name{ctgov_get_first_snapshot_year_month}
\alias{ctgov_get_first_snapshot_year_month}
\title{Download and Initialize the First Available AACT Snapshot for a Given 
Year/Month}
\usage{
ctgov_get_first_snapshot_year_month(
  year,
  month,
  db_path = "ctgov.duckdb",
  db_derived_path = "ctgov-derived.duckdb",
  tmp_dir = tempdir(),
  cleanup = TRUE,
  verbose = TRUE,
  ask_understand = TRUE
)
}
\arguments{
\item{year}{Integer. Target year for selecting a snapshot. Must be 
between 2017 and the current year.}

\item{month}{Integer (1â€“12). Target month within the given year.}

\item{db_path}{Character. File path to store the primary DuckDB database 
(default: `"ctgov.duckdb"`).}

\item{db_derived_path}{Character. File path to store the derived DuckDB 
database (default: `"ctgov-derived.duckdb"`).}

\item{tmp_dir}{Character. Directory for temporary files like the 
downloaded ZIP and extracted contents (default: `tempdir()`).}

\item{cleanup}{Logical. Whether to delete downloaded and extracted files 
after processing (default: `TRUE`).}

\item{verbose}{Logical. Whether to inform the user of progress messages 
(default: `TRUE`).}

\item{ask_understand}{Logical. Whether to prompt the user with a 
confirmation before downloading the full snapshot (default: `TRUE`).}
}
\value{
Invisibly returns `TRUE` if processing completes successfully; 
returns `NULL` if the user declines the confirmation prompt.
}
\description{
This function retrieves the earliest ClinicalTrials.gov (AACT) snapshot 
available on or after the specified year and month. It downloads the 
snapshot ZIP archive, extracts its contents, and initializes two DuckDB 
databases: one derived from raw data. Optionally, it cleans up temporary 
files after successful processing.
}
\details{
The flow of operations is:
1. Optionally prompt the user to confirm they've read and understood the 
implications of downloading a full ClinicalTrials.gov snapshot.
2. Find the first available snapshot after the specified year and month 
using `get_first_snap_download()`.
3. Download the snapshot ZIP archive to `tmp_dir`.
4. Extract the archive and instantiate the specified DuckDB databases 
(`db_path`, `db_derived_path`) via helper functions.
5. Optionally clean up temporary files.

If the `verbose` flag is `TRUE`, progress messages are emitted using 
`cli_inform()`. If the user declines the confirmation 
(`ask_understand = TRUE`), the function exits silently with `NULL`.
}
\examples{
\dontrun{
# Download the first snapshot available in May 2025
ctgov_get_first_snapshot_year_month(2025, 5)

# Non-interactive invocation (silent, no prompt)
ctgov_get_first_snapshot_year_month(
  2025, 
  5, 
  ask_understand = FALSE, 
  verbose = FALSE
)
}

}
